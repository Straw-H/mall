(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76813583"],{"055a":function(t,e,s){"use strict";var i=s("4330"),a=s.n(i);a.a},"09f7":function(t,e,s){},1295:function(t,e,s){},"1ec7":function(t,e,s){"use strict";var i=s("403c"),a=s.n(i);a.a},"2e71":function(t,e,s){t.exports=s.p+"img/share.6487bc83.svg"},"2e93":function(t,e,s){"use strict";var i=s("1295"),a=s.n(i);a.a},3902:function(t,e,s){"use strict";var i=s("5b86"),a=s.n(i);a.a},"403c":function(t,e,s){},"429e":function(t,e,s){t.exports=s.p+"img/back.570b9af0.svg"},4330:function(t,e,s){},"49f6":function(t,e,s){"use strict";var i=s("fa09"),a=s.n(i);a.a},"57ec":function(t,e,s){"use strict";var i=s("d358"),a=s.n(i);a.a},"59fb":function(t,e,s){t.exports=s.p+"img/collect.7a7ccc98.svg"},"5b86":function(t,e,s){},"5e52":function(t,e,s){t.exports=s.p+"img/customer.dcc5fd1f.svg"},"60a5":function(t,e,s){},6804:function(t,e,s){},6834:function(t,e,s){"use strict";var i=s("60a5"),a=s.n(i);a.a},"6ab7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail"},[s("detail-nav-bar",{ref:"detailNavBar",attrs:{titleIndex:t.titleIndex},on:{itemClick:t.itemClick}}),s("scroll",{ref:"scroll",staticClass:"detail-scroll",attrs:{"probe-type":3,data:[t.topImages,t.goods,t.shop,t.userRate,t.goodsInfo,t.goodsSpecs,t.detailRecommend]},on:{currentIndex:t.currentPosition}},[s("detail-swiper",{ref:"swiper",attrs:{"top-images":t.topImages}}),s("detail-base-info",{attrs:{goods:t.goods}}),s("detail-shop-info",{attrs:{shop:t.shop}}),s("detail-user-rate",{ref:"rate",attrs:{"user-rate":t.userRate}}),s("detail-goods-info",{ref:"goodsInfo",attrs:{"goods-info":t.goodsInfo},on:{detailImgLoad:t.detailImgLoad}}),s("detail-shop-specs",{ref:"specs",attrs:{"goods-specs":t.goodsSpecs}}),s("detail-recommend-info",{ref:"recommend",attrs:{"detail-recommend":t.detailRecommend}})],1),s("detail-tab-bar",{attrs:{"shop-name":t.shop.name},on:{addCartClick:t.addCartClick,buyClick:t.buyClick}}),s("back-top",{directives:[{name:"show",rawName:"v-show",value:t.showBackTop,expression:"showBackTop"}],nativeOn:{click:function(e){return t.backTop(e)}}})],1)},a=[],o=(s("b0c0"),s("a9e3"),s("2909")),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav-bar",{staticClass:"detail-nav-bar"},[i("div",{attrs:{slot:"left"},on:{click:t.backClick},slot:"left"},[i("img",{attrs:{src:s("429e"),alt:""}})]),i("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},t._l(t.titles,(function(e,s){return i("div",{staticClass:"title-item",class:{active:s===t.titleIndex},on:{click:function(e){return t.itemClick(s)}}},[t._v(" "+t._s(e)+" ")])})),0),i("div",{attrs:{slot:"right"},on:{click:t.collectClick},slot:"right"},[i("img",{attrs:{src:s("2e71"),alt:""}})])])},c=[],l=s("a7ac"),r={name:"DetailNavBar",components:{NavBar:l["a"]},data:function(){return{titles:["商品","评论","详情","参数","推荐"]}},props:{titleIndex:{type:Number,default:0}},methods:{itemClick:function(t){this.$emit("itemClick",t)},backClick:function(){this.$router.back()},collectClick:function(){alert("分享宝贝")}}},d=r,u=(s("6834"),s("0c7c")),f=Object(u["a"])(d,n,c,!1,null,"467fad6c",null),m=f.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("viewer",{attrs:{images:t.topImages}},[s("swiper",{staticClass:"detail-swiper"},t._l(t.topImages,(function(t,e){return s("swiper-item",[s("img",{key:e,attrs:{src:t}})])})),1)],1)},h=[],v=s("dc2c"),g={name:"DetailSwiper",data:function(){return{isImgLoad:!1}},props:{topImages:{type:Array,default:function(){return[]}}},components:{Swiper:v["a"],SwiperItem:v["b"]}},C=g,_=(s("a917"),Object(u["a"])(C,p,h,!1,null,"cd50926a",null)),b=_.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.goods).length?s("div",{staticClass:"detail-base-info"},[s("p",{staticClass:"title"},[t._v(t._s(t.goods.title))]),s("div",{staticClass:"goods-price"},[s("span",{staticClass:"newPrice"},[t._v(t._s(t.goods.newPrice))]),s("span",{staticClass:"olderPrice"},[t._v(t._s(t.goods.oldPrice))]),""!==t.goods.discount?s("span",{staticClass:"discount"},[t._v(t._s(t.goods.discount))]):t._e()]),s("div",{staticClass:"other-info"},[s("span",[t._v(t._s(t.goods.columns[0]))]),s("span",[t._v(t._s(t.goods.columns[1]))]),s("span",[t._v(t._s(t.goods.services[t.goods.services.length-1].name))])]),s("div",{staticClass:"service-info"},t._l(t.goods.services.length-1,(function(e){return s("span",{staticClass:"service-item"},[s("img",{attrs:{src:t.goods.services[e-1].icon,alt:""}}),s("span",[t._v(t._s(t.goods.services[e-1].name))])])})),0)]):t._e()},I=[],y={name:"DetailBaseInfo",props:{goods:{type:Object,default:function(){return{}}}}},w=y,O=(s("57ec"),Object(u["a"])(w,k,I,!1,null,"8691f392",null)),S=O.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-shop"},[s("div",{staticClass:"shop-top"},[s("img",{attrs:{src:t.shop.logo,alt:""}}),s("span",[t._v(t._s(t.shop.name))])]),s("div",{staticClass:"shop-middle"},[s("div",{staticClass:"shop-middle-item middle-left"},[s("div",{staticClass:"info-sell"},[s("div",{staticClass:"sell-count"},[t._v(t._s(t.shop.sells))]),s("div",{staticClass:"sell-text"},[t._v("总销量")])]),s("div",{staticClass:"info-sell"},[s("div",{staticClass:"sell-count"},[t._v(t._s(t.shop.goods))]),s("div",{staticClass:"sell-text"},[t._v("全部宝贝")])])]),s("div",{staticClass:"shop-middle-item middle-right"},[s("ul",{staticClass:"shop-score"},t._l(t.shop.score,(function(e){return s("li",[s("span",{staticClass:"item-name"},[t._v(t._s(e.name))]),s("span",{staticClass:"item-score",class:{unScore:!e.isBetter}},[t._v(t._s(e.score))]),s("span",{staticClass:"item-better",class:{unBetter:!e.isBetter}},[t._v(t._s(e.isBetter?"高":"低"))])])})),0),s("div",{staticClass:"score-item"}),s("div",{staticClass:"score-item"})])]),s("div",{staticClass:"shop-bottom"},[s("div",{on:{click:t.goShop}},[t._v("进店逛逛")])])])},$=[],R={name:"DetailShopInfo",data:function(){return{scoreStatus:!0}},props:{shop:{type:Object,default:function(){return{}}}},methods:{goShop:function(){alert("进来玩呀")}}},D=R,j=(s("823f"),Object(u["a"])(D,x,$,!1,null,"4b999cd2",null)),T=j.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-goods"},[s("div",{staticClass:"info-desc"},[s("div",{staticClass:"start"}),s("div",{staticClass:"desc"},[t._v(t._s(t.goodsInfo.desc))]),s("div",{staticClass:"end"})]),s("div",{staticClass:"info-key"},[t._v(t._s(t.goodsInfo.key))]),s("div",{staticClass:"info-img"},[s("viewer",{attrs:{images:t.goodsInfo.images}},t._l(t.goodsInfo.images,(function(e,i){return s("img",{key:i,attrs:{src:e},on:{load:t.detailImgLoad}})})),0)],1)])},N=[],P={name:"DetailGoodsInfo",data:function(){return{currentCount:0}},props:{goodsInfo:{type:Object,default:function(){return{}}}},methods:{detailImgLoad:function(){++this.currentCount===this.goodsInfo.images.length&&this.$emit("detailImgLoad")}}},E=P,L=(s("2e93"),Object(u["a"])(E,B,N,!1,null,"43ff149e",null)),G=L.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.goodsSpecs).length?s("div",{staticClass:"detail-specs"},[s("div",{staticClass:"specs-rule"},[s("div",{staticClass:"rule-key"},[t._v(t._s(t.goodsSpecs.ruleKey))]),s("ul",{staticClass:"rule-content"},t._l(t.goodsSpecs.ruleSet[0],(function(e){return s("li",{staticClass:"rule-item"},t._l(e,(function(e){return s("p",[t._v(t._s(e))])})),0)})),0)]),s("div",{staticClass:"specs-info"},[s("div",{staticClass:"info-key"},[t._v(t._s(t.goodsSpecs.infoKey))]),s("ul",{staticClass:"info-content"},t._l(t.goodsSpecs.infoSet,(function(e){return s("li",{staticClass:"info-item"},[s("p",[t._v(t._s(e.key))]),s("div",[t._v(t._s(e.value))])])})),0)])]):t._e()},A=[],K={name:"DetailShopSpecs",props:{goodsSpecs:{type:Object,default:function(){return{}}}}},U=K,z=(s("3902"),Object(u["a"])(U,M,A,!1,null,"4ebe4561",null)),J=z.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.userRate).length?s("div",{staticClass:"detail-rate"},[s("div",{staticClass:"rate-key"},[s("div",{staticClass:"rate-title"},[t._v(" 宝贝评价 "),s("span",[t._v(t._s(t.userRate.rate))])]),s("div",{staticClass:"rate-more",on:{click:t.rateMoreClick}},[t._v(" 查看全部 ")])]),s("div",{staticClass:"user-rate"},[s("div",{staticClass:"user-info"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.userRate.userImg,expression:"userRate.userImg"}],attrs:{alt:""}}),t._v(" "+t._s(t.userRate.userName)+" ")]),s("div",{staticClass:"rate-content"},[s("div",{staticClass:"content-info"},[t._v(t._s(t.userRate.content))]),s("div",{staticClass:"content-desc"},[s("span",{staticClass:"data"},[t._v(t._s(t._f("showDate")(t.userRate.createTime)))]),s("span",[t._v(t._s(t.userRate.specs))])]),s("div",{staticClass:"content-images"})])])]):t._e()},H=[],V=s("325c"),X={name:"DetailUserRate",props:{userRate:{type:Object,default:function(){return{}}}},filters:{showDate:function(t){var e=new Date(1e3*t);return Object(V["b"])(e,"yyyy-MM-dd")}},methods:{rateMoreClick:function(){alert("更多评价")}}},Y=X,F=(s("1ec7"),Object(u["a"])(Y,q,H,!1,null,"0cd49124",null)),Q=F.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-recommend"},[s("div",{staticClass:"recommend-key"},[t._v("热门推荐")]),s("goods-list",{attrs:{goods:t.detailRecommend}})],1)},Z=[],tt=s("6d71"),et={name:"DetailRecommendInfo",props:{detailRecommend:{type:Array,default:function(){return[]}}},components:{GoodsList:tt["a"]}},st=et,it=(s("055a"),Object(u["a"])(st,W,Z,!1,null,"87ea6486",null)),at=it.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-bar"},[i("div",{staticClass:"bar-item"},[i("div",{on:{click:t.shopClick}},[i("img",{attrs:{src:s("bdff"),alt:""}}),i("div",{staticClass:"text"},[t._v("店铺")])]),i("div",{on:{click:t.customerClick}},[i("img",{attrs:{src:s("5e52"),alt:""}}),i("div",{staticClass:"text"},[t._v("客服")])]),i("div",{on:{click:t.collectClick}},[i("img",{attrs:{src:t.collectImg,alt:""}}),i("div",{staticClass:"text"},[t._v(t._s(this.isCollect?"收藏":"已收藏"))])])]),i("div",{staticClass:"bar-item option"},[i("div",{staticClass:"cart",on:{click:t.addCartClick}},[t._v("加入购物车")]),i("div",{staticClass:"buy",on:{click:t.buyClick}},[t._v("立即购买")])])])},nt=[],ct={name:"DetailTabBar",props:{shopName:{type:String,default:"Straw-H"}},data:function(){return{isCollect:!0}},computed:{collectImg:function(){return s(this.isCollect?"59fb":"f166")}},methods:{shopClick:function(){alert(this.shopName)},customerClick:function(){alert("联系商家")},collectClick:function(){this.isCollect=!this.isCollect,this.isCollect&&alert("取消收藏成功")},addCartClick:function(){this.$emit("addCartClick")},buyClick:function(){this.$emit("buyClick")}}},lt=ct,rt=(s("7eac"),Object(u["a"])(lt,ot,nt,!1,null,"35524874",null)),dt=rt.exports,ut=s("0183"),ft=s("fdd6"),mt=s("eecb");function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ht=s("1bab");function vt(t){return Object(ht["a"])({url:"/detail",params:{iid:t}})}function gt(){return Object(ht["a"])({url:"/recommend"})}var Ct=function t(e,s,i){pt(this,t),this.title=e.title,this.desc=e.desc,this.newPrice=e.price,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.columns=s,this.services=i,this.eralPrice=e.lowNowPrice},_t=function t(e){pt(this,t),this.logo=e.shopLogo,this.name=e.name,this.sells=e.cSells,this.goods=e.cGoods,this.score=e.score},bt=function t(e){pt(this,t),this.desc=e.desc,this.key=e.detailImage[0].key,this.images=e.detailImage[0].list},kt=function t(e){pt(this,t),this.infoKey=e.info.key,this.infoSet=e.info.set,this.ruleKey=e.rule.key,this.ruleSet=e.rule.tables,this.ruleDisc=e.rule.disclaimer},It=function t(e){pt(this,t),this.rate=e.cRate,this.userImg=e.list[0].user.avatar,this.userName=e.list[0].user.uname,this.content=e.list[0].content,this.createTime=e.list[0].created,this.specs=e.list[0].style},yt={name:"Detail",components:{DetailNavBar:m,DetailSwiper:b,DetailBaseInfo:S,DetailShopInfo:T,DetailGoodsInfo:G,DetailShopSpecs:J,DetailUserRate:Q,DetailRecommendInfo:at,DetailTabBar:dt,Scroll:ut["a"],BackTop:ft["a"]},data:function(){return{iid:null,topImages:[],goods:{},shop:{},goodsInfo:{},goodsSpecs:{},userRate:{},detailRecommend:[],themeOpt:[],titleIndex:0,rateY:0}},created:function(){this.iid=this.$route.query.id,this.getGoodDetail(),this.getRecommend()},destroyed:function(){this.$bus.$off("itemImgLoad",this.itemImgListerer)},mixins:[mt["b"],mt["a"]],methods:{buyClick:function(){this.$toast.show("立即购买")},addCartClick:function(){var t={iid:this.iid,shopName:this.shop.name,title:this.goods.title,price:this.goods.eralPrice,image:this.topImages[0],desc:this.goods.desc,check:!1};this.$store.dispatch("addCart",t),this.$toast.show("添加购物车成功")},_getOffsetTop:function(){this.themeOpt=[],this.themeOpt.push(0),this.themeOpt.push(this.$refs.rate.$el.offsetTop||0),this.themeOpt.push(this.$refs.goodsInfo.$el.offsetTop||0),this.themeOpt.push(this.$refs.specs.$el.offsetTop||0),this.themeOpt.push(this.$refs.recommend.$el.offsetTop||0),this.themeOpt.push(Number.MAX_VALUE)},_listenScrollTheme:function(t){this.themeOpt.length;for(var e in this.themeOpt){var s=parseInt(e);if(t>=this.themeOpt[s]&&t<this.themeOpt[s+1]){this.titleIndex!==s&&(this.titleIndex=s);break}}},itemClick:function(t){this.titleIndex=t,this.$refs.scroll.scrollTop(0,-this.themeOpt[t],400)},detailImgLoad:function(){this._getOffsetTop(),this.$refs.scroll.refresh()},currentPosition:function(t){this.listenShowBackTop(t.y),this._listenScrollTheme(-t.y)},getGoodDetail:function(){var t=this;vt(this.iid).then((function(e){var s,i=e.result;(s=t.topImages).push.apply(s,Object(o["a"])(i.itemInfo.topImages)),t.goods=new Ct(i.itemInfo,i.columns,i.shopInfo.services),t.shop=new _t(i.shopInfo),t.goodsInfo=new bt(i.detailInfo),t.goodsSpecs=new kt(i.itemParams),i.rate.cRate>0&&(t.userRate=new It(i.rate))}),(function(t){alert(t)}))},getRecommend:function(){var t=this;gt().then((function(e,s){s||(t.detailRecommend=e.data.list)}))}}},wt=yt,Ot=(s("49f6"),Object(u["a"])(wt,i,a,!1,null,"a412621e",null));e["default"]=Ot.exports},"7eac":function(t,e,s){"use strict";var i=s("d5a3"),a=s.n(i);a.a},"823f":function(t,e,s){"use strict";var i=s("09f7"),a=s.n(i);a.a},a917:function(t,e,s){"use strict";var i=s("6804"),a=s.n(i);a.a},bdff:function(t,e,s){t.exports=s.p+"img/shop.ffd4779d.svg"},d358:function(t,e,s){},d5a3:function(t,e,s){},f166:function(t,e,s){t.exports=s.p+"img/collect_active.4c9fce0a.svg"},fa09:function(t,e,s){}}]);
//# sourceMappingURL=chunk-76813583.4073b7a2.js.map