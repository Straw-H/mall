(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43770010"],{"09f4":function(t,e,n){},"22cb":function(t,e,n){t.exports=n.p+"img/recommend_bg.794b6628.jpg"},5772:function(t,e,n){"use strict";var s=n("6cae"),a=n.n(s);a.a},"5d38":function(t,e,n){"use strict";var s=n("cc8f"),a=n.n(s);a.a},"6cae":function(t,e,n){},"81ad":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"minirefresh-wrap",attrs:{id:"home"}},[n("nav-bar",{staticClass:"nav-bar"},[n("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),n("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isTabFixed,expression:"isTabFixed"}],ref:"tabControlOut",staticClass:"tab-control-out",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabliClick},nativeOn:{click:function(e){return t.syncTabIndex(e)}}}),n("scroll",{ref:"scroll",staticClass:"scroll",attrs:{"probe-type":3,"pull-up-load":!0},on:{currentIndex:t.currentPosition,pullingUp:t.pullingUp}},[n("HomeSwiper",{attrs:{banners:t.banners},on:{swiperImgLoad:t.swiperImgLoad}}),n("recommend-view",{attrs:{recommends:t.recommends}}),n("feature-view"),n("tab-control",{ref:"tabControlIn",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabliClick},nativeOn:{click:function(e){return t.syncTabIndex(e)}}}),n("goods-list",{attrs:{goods:t.showGoodsList}})],1),n("back-top",{directives:[{name:"show",rawName:"v-show",value:t.showBackTop,expression:"showBackTop"}],nativeOn:{click:function(e){return t.backTop(e)}}})],1)},a=[],r=n("2909"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("viewer",{attrs:{images:t.banners}},[n("swiper",t._l(t.banners,(function(e,s){return n("swiper-item",{key:s},[n("img",{attrs:{src:e.image,alt:e.title,title:e.title},on:{load:t.swiperImgLoad}})])})),1)],1)},o=[],c=n("dc2c"),l={name:"HomeSwiper",data:function(){return{isImgLoad:!1}},props:{banners:{type:Array,default:function(){return[]}}},components:{Swiper:c["a"],SwiperItem:c["b"]},methods:{swiperImgLoad:function(){this.isImgLoad||(this.$emit("swiperImgLoad"),this.isImgLoad=!0)}}},u=l,d=n("0c7c"),m=Object(d["a"])(u,i,o,!1,null,"0ac0db93",null),f=m.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommend"},t._l(t.recommends,(function(e){return n("div",{staticClass:"recommend-item"},[n("div",{attrs:{href:e.link}},[n("img",{attrs:{src:e.image,alt:""}}),n("div",[t._v(t._s(e.title))])])])})),0)},b=[],h={name:"RecommendView",props:{recommends:{type:Array,default:function(){return[]}}}},v=h,g=(n("bf0d"),Object(d["a"])(v,p,b,!1,null,"7dad8b96",null)),w=g.exports,I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reature"},[s("img",{attrs:{src:n("22cb"),alt:""}})])}],x={name:"FeatureView"},T=x,k=(n("5d38"),Object(d["a"])(T,I,C,!1,null,"52ffee8b",null)),L=k.exports,_=n("a7ac"),$=n("0183"),y=n("9bd0"),O=n("6d71"),H=n("fdd6"),j=n("1bab");function S(){return Object(j["a"])({url:"/home/multidata"})}function E(t,e){return Object(j["a"])({url:"/home/data",params:{type:t,page:e}})}var G=n("b95e"),D=n("eecb"),F={name:"HomeView",data:function(){return{banners:[],recommends:[],goodsList:{pop:{page:0,list:[]},sell:{page:0,list:[]},new:{page:0,list:[]}},tabControllTop:0,isTabFixed:!1,saveY:0,itemImgListerer:null}},components:{HomeSwiper:f,RecommendView:w,FeatureView:L,NavBar:_["a"],Scroll:$["a"],TabControl:y["a"],GoodsList:O["a"],BackTop:H["a"]},computed:{showGoodsList:function(){return this.goodsList[this.currentType].list}},mixins:[D["b"],D["a"],D["c"]],methods:{syncTabIndex:function(){this.$refs.tabControlOut.currentIndex=this.currentTabIndex,this.$refs.tabControlIn.currentIndex=this.currentTabIndex},swiperImgLoad:function(){this.tabControllTop=this.$refs.tabControlIn.$el.offsetTop},currentPosition:function(t){var e=t.y;this.listenShowBackTop(e),this.isTabFixed=e<-this.tabControllTop},pullingUp:function(){this.getHomeGoodData(this.currentType),this.$refs.scroll&&this.$refs.scroll.finishPullUp()},getHomeMasterData:function(){var t=this;S().then((function(e){t.banners=e.data.banner.list,t.recommends=e.data.recommend.list}))},getHomeGoodData:function(t){var e=this,n=this.goodsList[t].page+1;E(t,n).then((function(n){var s,a=n.data.list;(s=e.goodsList[t].list).push.apply(s,Object(r["a"])(a)),e.goodsList[t].page+=1}))}},activated:function(){this.$refs.scroll.scrollTop(0,this.saveY,0),this.$refs.scroll.refresh()},deactivated:function(){this.saveY=this.$refs.scroll.getScrollY(),this.$bus.$off("itemImgLoad",this.itemImgListerer)},created:function(){this.getHomeMasterData(),this.getHomeGoodData(G["b"].POP),this.getHomeGoodData(G["b"].SELL),this.getHomeGoodData(G["b"].NEW)}},B=F,P=(n("5772"),Object(d["a"])(B,s,a,!1,null,"424ff208",null));e["default"]=P.exports},"9bd0":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,s){return n("div",{staticClass:"tab-control-item",class:{active:s===t.currentIndex},on:{click:function(e){return t.itemClick(s)}}},[n("span",[t._v(t._s(e))])])})),0)},a=[],r={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},i=r,o=(n("fa9e"),n("0c7c")),c=Object(o["a"])(i,s,a,!1,null,"628d25bd",null);e["a"]=c.exports},bf0d:function(t,e,n){"use strict";var s=n("09f4"),a=n.n(s);a.a},c4eb:function(t,e,n){},cc8f:function(t,e,n){},fa9e:function(t,e,n){"use strict";var s=n("c4eb"),a=n.n(s);a.a}}]);
//# sourceMappingURL=chunk-43770010.3e7f4a74.js.map